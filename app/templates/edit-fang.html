<!DOCTYPE html>
<html>
  <head>
    <!-- ↓ 这些设置不要动 -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- ↓ 标题 -->
    <title>编辑模板</title>
    <!-- ↓ 默认引用bootstrap、icomoon字体以及default样式 -->
    <link rel="stylesheet" type="text/css" href={{url_for('static',filename="css/bootstrap.min.css")}}>
  <link rel="stylesheet" type="text/css" href={{url_for('static',filename="css/default.css")}}>
  <link rel="stylesheet" type="text/css" href={{url_for('static',filename="css/card.css")}}>
  <link rel="stylesheet" type="text/css" href={{url_for('static',filename="css/icomoon.css")}}>
  <link rel="stylesheet" type="text/css" href={{url_for('static',filename="css/edit.css")}}>
    <!-- ↓ 自定义css，名称最好和html相同 -->
  <style type="text/css">
  ul{
    margin-bottom: 0px;
  }
  .back-logo{
    width: 53px;
  }
  .logotext {
    color: #000;
    font-size: 8pt;
    position: absolute;
    top: 112px;
    text-align: center;
    width: 100%;
  }

  .banner{
  width: 300px;
  height: 78px;
  position: absolute;
  top: 54px;
  padding-top: 5px;
  }
  .ribbon {
    padding-top: 8px;
  }

  </style>
  </head>
  <body>
    <div class="container ">
     <!--  <div class="row"> -->
        <div class="describe-text">正面</div>
        <div class="container-front">
            <div  class= "front-padding" name="group" id="card1" value="1" onclick="location.href='electronic_edit.html';">
              <!--  -->
              <div class = "card1-area">
                <div class="card1-logoicon ">
                    <div class="icontop"><img name="headpic" src={{url_for('static',filename="images/head.png")}}></div>
                     <div class="underline1 background-yanse "></div>
                    <div class ="iconbottom"><img name="qrcode" src={{url_for('static',filename="images/二维码1.png")}}></div>
                    <!-- <img class="pull-left" src="images/扫一扫.jpg"> -->
                </div>
                <div class="card1-content0">
                <div class="card1-content ">
                    <div class="card-biaoti biaoti1">姓名</div>
                    <div name="position" class="card-fubiaoti fubiaoti1">公司 职位</div>
                    <ul class="card-info list-unstyled">
                    <!-- <li><span class="icon-phone_paper yanse"></span> 152-1234-5678</li>
                    <li><span class="icon-mail_paper yanse"></span> 123456789@qq.com</li>
                    <li><span class="icon-link_paper yanse"></span> http://www.123.com</li>
                    <li><span class="icon-address_paper yanse"></span> xx省xx市xx区xx路xx号</li> -->
                    </ul>
                </div>
                </div>
              </div>
              <!--  -->
            </div>
            <div name="group" id="card2" value="2" onclick="location.href='electronic_edit.html';">
                <div class = "card2-area">
                    <div class="card2-logoicon pull-right">
                        <div class="icontop2"><img name="headpic" src={{url_for('static',filename="images/input-logo.png")}}></div>
                    <!--  <div class="underline1 "></div> -->
                        <div class="icontop2"><img name="qrcode" src={{url_for('static',filename="images/二维码1.png")}}></div>
                    <!-- <img class="pull-left" src="images/扫一扫.jpg"> -->
                    </div>
                    <div class="card2-content0">
                        <div class="card-biaoti biaoti1 pull-top">姓名</div>
                        <div name="position" class="card-fubiaoti fubiaoti1">公司 职位</div>
                    </div>
                </div>
                <div class="card2-content background-yanse">
                    <ul class="card-info list-unstyled">
                    <!-- <li><span class="icon-phone_paper white"></span> 152-1234-5678</li>
                    <li><span class="icon-mail_paper white"></span> 123456789@qq.com</li>
                    <li><span class="icon-link_paper white"></span> http://www.123.com</li>
                    <li><span class="icon-address_paper white"></span> xx省xx市xx区xx路xx号</li> -->
                    </ul>
               </div>
            </div>
<!--               <div name="group" id="card3" value="3" onclick="location.href='electronic_edit.html';">
               <div class="width-100">
               <div class="card2-content width-50 pull-left">
               <h2 class="card-biaoti biaoti3">姓名</h2>
               <p class="card-fubiaoti fubiaoti3">公司 职位</p>
               </div>
               <div class="card2-content width-50 pull-left">
                <img class="pull-right " src="images/二维码1.png">
               <img class="pull-right jianju " src="images/input logo.png">
               <img class="pull-right" src="images/扫一扫.jpg">
               </div>
               </div>
               <div class="pull-left width-100">
                <ul class="card-info list-unstyled">
                <li><span class="icon-phone_paper yanse"></span> 152-1234-5678</li>
                <li><span class="icon-mail_paper yanse"></span> 123456789@qq.com</li>
                <li><span class="icon-link_paper yanse"></span> http://www.123.com</li>
                <li><span class="icon-address_paper yanse"></span> xx省xx市xx区xx路xx号</li>
                </ul>
               </div>
               </div>
               <div name="group" id="card4" value="4" onclick="location.href='electronic_edit.html';">
               <div class="card2-content width-60 pull-left">
               <h2 class="card-biaoti biaoti4">姓名</h2>
               <p class="card-fubiaoti fubiaoti4">公司 职位</p>
               <ul class="card-info list-unstyled">
                <li><span class="icon-phone_paper yanse"></span> 152-1234-5678<li>
                <li><span class="icon-mail_paper yanse"></span> 123456789@qq.com</li>
                <li><span class="icon-link_paper yanse"></span> http://www.123.com</li>
                <li><span class="icon-address_paper yanse"></span> xx省xx市xx区xx路xx号</li>
                </ul>
               </div>
               <div class="card3-logo width-40 pull-right">
               <img class="pull-right" src="images/二维码1.png">
               <img class="pull-right" src="images/扫一扫.jpg">
               <img class="pull-right xiaduiqi" src="images/input logo.png">
               </div>
               </div>
               <div name="group" id="card5" value="5" onclick="location.href='electronic_edit.html';">
               <div class="width-100">
               <div class="card2-content width-50 pull-left">
               <h2 class="card-biaoti biaoti3">姓名</h2>
               <p class="card-fubiaoti fubiaoti5">公司 职位</p>
               <div class="underline2 width-80 background-yanse"></div>
               </div>
               <div class="card2-content width-50 pull-left">
                <img class="pull-right " src="images/二维码1.png">
               <img class="pull-right jianju " src="images/input logo.png">
               <img class="pull-right" src="images/扫一扫.jpg">
               </div>
               </div>
               <div class="pull-left width-100">
                <ul class="card-info list-unstyled">
                <li><span class="icon-phone_paper yanse"></span> 152-1234-5678</li>
                <li><span class="icon-mail_paper yanse"></span> 123456789@qq.com</li>
                <li><span class="icon-link_paper yanse"></span> http://www.123.com</li>
                <li><span class="icon-address_paper yanse"></span> xx省xx市xx区xx路xx号</li>
                </ul>
               </div>
               </div>
               <div name="group" id="card6" value="6" onclick="location.href='electronic_edit.html';">
               <div class="card2-content width-60 pull-left">
               <h2 class="card-biaoti biaoti4">姓名</h2>
               <p class="card-fubiaoti fubiaoti6">公司 职位</p>
               <div class="width-70 underline2 background-yanse"></div>
               <ul class="card-info list-unstyled">
                <li><span class="icon-phone_paper yanse"></span> 152-1234-5678<li>
                <li><span class="icon-mail_paper yanse"></span> 123456789@qq.com</li>
                <li><span class="icon-link_paper yanse"></span> http://www.123.com</li>
                <li><span class="icon-address_paper yanse"></span> xx省xx市xx区xx路xx号</li>
                </ul>
               </div>
               <div class="card3-logo width-40 pull-right">
               <img class="pull-right" src="images/二维码1.png">
               <img class="pull-right" src="images/扫一扫.jpg">
               <img class="pull-right xiaduiqi" src="images/input logo.png">
               </div>
               </div>
               <div name="group" id="card7" value="7" onclick="location.href='electronic_edit.html';">
               <div class="card2-content width-60 pull-left">
               <h2 class="card-biaoti biaoti4">姓名</h2>
               <p class="card-fubiaoti fubiaoti4">公司 职位</p>
               <div class="card7-sekuai background-yanse">
               <ul class="card-info7 list-unstyled">
                <li><span class="icon-phone_paper "></span> 152-1234-5678<li>
                <li><span class="icon-mail_paper "></span> 123456789@qq.com</li>
                <li><span class="icon-link_paper "></span> http://www.123.com</li>
                <li><span class="icon-address_paper"></span> xx省xx市xx区xx路xx号</li>
                </ul>
                </div>
               </div>
               <div class="card3-logo width-40 pull-right">
               <img class="pull-right logojianju" src="images/input logo.png">
               <img class="pull-right" src="images/二维码1.png">
               <img class="pull-right" src="images/扫一扫.jpg">
               </div>
               </div>
               <div  name="group" id="card8" value="8" onclick="location.href='electronic_edit.html';">
               <div class="width-100">
               <div class="card2-content width-50 pull-left">
               <h2 class="card-biaoti biaoti3">姓名</h2>
               <p class="card-fubiaoti fubiaoti3">公司 职位</p>
               </div>
               <div class="card2-content width-50 pull-right">
                <img class="pull-right " src="images/二维码1.png">
               <img class="pull-right jianju " src="images/input logo.png">
               <img class="pull-right" src="images/扫一扫.jpg">
               </div>
               </div>
               <div class="pull-left width-100 card8-sekuai background-yanse">
                <ul class="card-info8 list-unstyled">
                <li><span class="icon-phone_paper "></span> 152-1234-5678</li>
                <li><span class="icon-mail_paper "></span> 123456789@qq.com</li>
                <li><span class="icon-link_paper "></span> http://www.123.com</li>
                <li><span class="icon-address_paper "></span> xx省xx市xx区xx路xx号</li>
                </ul>
               </div>
               </div> -->
        </div>
        <!-- </div> -->

          <div class="describe-text">反面(点击背面切换样式，点击logo编辑logo)</div>
            <div class="container-back ">
             <div class="dingwei" id="back1">
                   <div class="banner-color background-yanse center">
                   <div ><a href={{url_for('cardback',user_id=user_id)}}><img class="back-logo" name="logo" class="" src={{url_for('static',filename="images/input-logo.png")}}></a></div>
                   </div>
                   <div class="logotext"><p></p></div>

            </div>
            <div  class="dingwei" id="back2">

                <div class="back2-bg  background-yanse back2-center">
                    <div class="col-xm-12 banner">
                      <center><a href={{url_for('cardback',user_id=user_id)}}><img class="back-logo" name="logo" src={{url_for('static',filename="images/input-logo.png")}}></a></center>
                   </div>
                   <div class="logotext"><p></p></div>
                </div>
            </div>

            <div  class="dingwei" id="back3">
              <div class="col-xm-12 banner">
                <div class = "pull-left ribbon">
                  <div class = "back3-bg background-yanse"></div>
                  <div class = "back3-bg1 background-yanse"></div>
                </div>
                <div class="back3-logo ">
                    <div>
                      <a href={{url_for('cardback',user_id=user_id)}}><img class="back-logo" name="logo" src={{url_for('static',filename="images/input-logo.png")}}></a>
                    </div>
                </div>
                <div class = "pull-right ribbon">
                  <div class = "back3-bg background-yanse"></div>
                  <div class = "back3-bg1 background-yanse"></div>
                </div>

                </div>
                <center><div class="logotext"><p></p></div></center>

            </div>
        </div>

      <!-- <div class="row"> -->
     <!--  <div class="describe-text">反面 (点击背面切换样式，点击logo更换logo)</div>
        <div class="container-back ">
             <div class="dingwei" id="back1">
                   <div class="banner-color background-yanse center">
                   <div ><a href={{url_for('cardback',user_id=user_id)}}><img class="" src="images/input logo.png"></a></div>
                    <div ><img src="images/选填2.png"></div>
                   </div>

            </div>
            <div  class="dingwei" id="back2">
                   <div class="back2-bg  background-yanse back2-center">
                   <div><a href={{url_for('cardback',user_id=user_id)}}><img src="images/input logo.png"></a></div>
                   <div><img src="images/选填2.png"></div>
                   </div>
            </div>
            <div  id = "dingwei" id="back3">
                <div class = "pull-left back3-bg0">
                <div class = "back3-bg background-yanse" ></div>
                <div class = "back3-bg1 background-yanse"></div>
                </div>
                   <div class=" back2-center back3-logo ">
                   <div><a href={{url_for('cardback',user_id=user_id)}}><img src="images/input logo.png"></a></div>
                   <div><img src="images/选填1.png"></div>
                   </div>
                   <!<div class="dise3 background-yanse"></div> -->
                <!-- <div class = "pull-right back3-bg0">
                <div class = "back3-bg background-yanse"></div>
                <div class = "back3-bg1 background-yanse"></div>
                </div>
            </div>
        </div>
 -->
            <!-- <div  class="dingwei" id="back3">
                <div class = "pull-left back3-bg0">
                <div class = "back3-bg background-yanse"></div>
                <div class = "back3-bg1 background-yanse"></div>
                </div>
                   <div class=" back2-center back3-logo ">
                   <div><a href={{url_for('cardback',user_id=user_id)}}><img src="images/input logo.png"></a></div>
                   <div><img src="images/选填1.png"></div>
                   </div>
                   <div class="dise3 background-yanse"></div>
                <div class = "pull-right back3-bg0">
                <div class = "back3-bg background-yanse"></div>
                <div class = "back3-bg1 background-yanse"></div>
                </div>
            </div>
        </div> -->
            <!-- </div>

      <! <div class="row"> -->
        <div class="container-color ">
            <div class="color-block pull-left" id="black-color">

            </div>
            <div class="color-block pull-left" id="blue-color">

            </div>
            <div class="color-block pull-left" id="lightblue-color">

            </div>
            <div class="color-block pull-left" id="green-color">

            </div>
            <div class="color-block pull-left" id="yellow-color">

            </div>
            <div class="color-block pull-left" id="orange-color">

            </div>
            <div class="color-block pull-left" id="red-color">

            </div>
            </div>


        <div class="content-bottom1">
         <a onclick="finish(this)"><center class="width-100 ">
           完成编辑
        </center></a>
      </div>
    <!-- </div> -->
</div>


    <!-- ↓jQuery和bootstrap的js效果，请保留，顺序不动 -->
    <script src={{url_for('static',filename="js/jquery-1.10.2.js")}}></script>
    <script src={{url_for('static',filename="js/bootstrap.min.js")}}></script>
    <script type= "text/javascript">
      $SCRIPT_ROOT = {{ request.script_root|tojson|safe }};
    </script>
    <script type="text/javascript">


    $(".container").on("click",".container-front",function(){
      location.href = "{{url_for('electronic_edit',user_id=user_id)}}"
    });


    $(function(){
      $.get($SCRIPT_ROOT+"/_getCardDetail",
      {
        user_id:{{user_id}}
      },

      function(data){
        var cardNum=sessionStorage.cardtype;
        var card = $("#card"+cardNum)
        var container_back = $(".container-back")
        card.find(".card-biaoti").html(data.name)
        card.find(".card-fubiaoti").html(data.corp+" "+data.position)
        ulist = card.find("ul")
        var count=0
        var maxline=0
        var background=false
        $.each(data.info,function(){
          count++;
          //需要设定一组card样式的参数：最多几行，是否有背景颜色
          switch(parseInt(cardNum)){
            case 1 :background=false;maxline = 7;break;
            case 2 :background=true;maxline = 5;break;
          }
          if (this.type !="intro" && count<=maxline) {
              ulist.append(makeAcontact (this.type,this.text,background))
          };
        });
        card.find("img[name='headpic']").attr("src","{{url_for('static',filename='uploads/')}}"+data.headpic)
        card.find("img[name='headpic']").attr("class","img-circle")
        card.find("img[name='qrcode']").attr("src","{{url_for('static',filename='qrcodes/')}}"+data.qrcode)
        container_back.each(function(){
          var back = $(this).find(".dingwei")
          var logotext = $(this).find(".dingwei").find(".logotext p")
          logotext.html(data.logoText)
          if (data.logo) {
            back.find("img[name='logo']").attr("src","{{url_for('static',filename='uploads/')}}"+data.logo)
          };
        });
      });
    });
    //构建一条信息
    function makeAcontact (type,text,background) {
      if(background){
        if (type=="social" || type=="fax") {
          return "<li><span class='icon-bell '></span> "+text+"</li>";
        }
        else{
          return "<li><span class='icon-"+type+"_paper '></span> "+text+"</li>";
        };
      }else
      {
        if (type=="social" || type=="fax") {
          return "<li><span class='icon-bell yanse'></span> "+text+"</li>";
        }
        else{
          return "<li><span class='icon-"+type+"_paper yanse'></span> "+text+"</li>";
        };
      }


    }
    function setCard(){
    var ss=parseInt(sessionStorage.cardtype);
    switch(ss){
    case 1: $("#card1").css("display","block");break;
    case 2: $("#card2").css("display","block");break;
    case 3: $("#card3").css("display","block");break;
    case 4: $("#card4").css("display","block");break;
    case 5: $("#card5").css("display","block");break;
    case 6: $("#card6").css("display","block");break;
    case 7: $("#card7").css("display","block");break;
    default: $("#card8").css("display","block");
    }
    }
    var backindex=3
    $(document).ready(function(){
      setCard();
     $("#black-color").click(function(){
    $(".background-yanse").css("background-color","#010101");
    $(".yanse").css("color","#010101");
    });
     $("#blue-color").click(function(){
    $(".background-yanse").css("background-color","#2e6fbc")
    $(".yanse").css("color","#2e6fbc")
    });
     $("#lightblue-color").click(function(){
    $(".background-yanse").css("background-color","#30a1d4");
    $(".yanse").css("color","#30a1d4");
    });
     $("#green-color").click(function(){
    $(".background-yanse").css("background-color","#0a9e50");
    $(".yanse").css("color","#0a9e50");
    });
     $("#yellow-color").click(function(){
    $(".background-yanse").css("background-color","#e58905");
    $(".yanse").css("color","#e58905");
    });
     $("#orange-color").click(function(){
    $(".background-yanse").css("background-color","#f96115");
    $(".yanse").css("color","#f96115");
    });
     $("#red-color").click(function(){
    $(".background-yanse").css("background-color","#8c131b");
    $(".yanse").css("color","#8c131b");
    });
    $("#back3").click(function(){
    $("#back3").fadeOut(300);
    $("#back2").find(".logotext").css("color","#fff")
    backindex--;
    });

    $("#back2").click(function(){
    $("#back2").fadeOut(300);
    $("#back1").find(".logotext").css("color","#fff")
    backindex--;
    });
    $("#back1").click(function(){
    $("#back3,#back2").fadeIn(300);
    $("#back3").find(".logotext").css("color","#000")
    backindex--;
      if (backindex==0) {backindex=3};
    });
    });
    function finish (onj) {
      sessionStorage.cardfront=$(".container-front").html()
      sessionStorage.cardback=$("#back"+backindex).html()
      location.href="{{url_for('afterEditcard',user_id=user_id)}}"
    }
    </script>

  </body>
</html>
